services:
  back-end-server:
    image: ghcr.io/ardabakici/taskbank:back-end-latest
    container_name: taskbank-backend
    environment:
      NODE_ENV: production
      MONGODB_URI: ${MONGODB_URI}
      PORT: 4000
    env_file: 
      - .env
    ports:
      - "4000:4000"        # host:container (Node/Express on 4000)
    depends_on:
      - mongodb
    restart: unless-stopped
    networks:
      - taskbank-network

  front-end-server:
    image: ghcr.io/ardabakici/taskbank:front-end-latest
    container_name: taskbank-frontend
    environment:
      NODE_ENV: production
    ports:
      - "3000:80"          # host:container (Nginx serving React)
    depends_on:
      - back-end-server
    restart: unless-stopped
    networks:
      - taskbank-network

networks:
  taskbank-network:
    driver: bridge
